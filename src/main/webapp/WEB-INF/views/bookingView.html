<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
	<title>Home page</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<th:block th:include="fragments/common :: head"></th:block>
</head>
<body >
	<header th:include="fragments/common :: navbar"></header>
	
	<div class="square">
	 <h1 class = "square"> Booking</h1>
	 
	 
	 	<div class="forma">
	 	
	 	
	 		<form enctype="multipart/form-data"
       	 role="form" th:action="@{/booking/save}" th:method="post"
			th:object="${bookingForm}" id="form">
			
		<input id="date" type="hidden" th:field="*{placementDate}" value="">
		<script>
			var fechaHoy = new Date();
			document.getElementById("date").setAttribute("value", fechaHoy);
		</script>
		
		
			<label for="reserv">Day of the reservation</label>
   		<input id="fechaBooking" name="reserv" type="date" min="" max="2021-01-1" th:field="*{reservationDate}"/>
   				<ul>
					<li th:each="err : ${#fields.errors('reservationDate')}" th:text="${err}" />
				</ul>
				
				<!-- Esto es para que no puedas reservar en una fecha mÃ¡s antigua que la del dia actual,
						y como maximo puedes reservar con 30 dias de adelanto -->
				<script>
				var fechaHoy = new Date();
				var anio = fechaHoy.getFullYear();
				var mes = fechaHoy.getMonth() + 1; 
				var dia = fechaHoy.getDate();
				var mes2 = fechaHoy.getMonth() +2;
				
				var minimo = anio + "-" + mes + "-" + dia;
				var maximo = anio + "-" + mes2 + "-" + dia;
				
				if(mes2 == 13){
					var mes2 = "01";
					var anio2 = anio+1;
					var maximo = anio2 + "-" + mes2 + "-" + dia;
				}else if (dia == 31){
					var maximo = anio + "-" + mes2 + "-" + dia -1;
				}else if (dia <10){
					var maximo = anio + "-" + mes2 + "-" + "0"+dia;
				}
				
				console.log(anio2);
				console.log(maximo);
				console.log(minimo);
				document.getElementById("fechaBooking").setAttribute("min", minimo);
				document.getElementById("fechaBooking").setAttribute("max", maximo);
				</script>
   		 <br>
   		<br>
   		<label for="seating">Diners</label>
   		
   		<input id= "seating" name="seating" type="number" min="2" max="12"  th:field="*{seating}"/> 
   				<ul>
					<li th:each="err : ${#fields.errors('seating')}" th:text="${err}" />
				</ul>
   		
   		<br>
   		<br>
   		
   		<label for="hourDate">Hour</label>
   		
   		<input id= "hourDate" name="hourDate" type="time" min="09:00" max="22:00"  th:field="*{hourDate}"/> 
   				<ul>
					<li th:each="err : ${#fields.errors('hourDate')}" th:text="${err}" />
				</ul>
   		
   		
   		<br>
   		<br>
   		
   		<label for="contactPhone">Contact Phone</label>
   		
   		<input id= "contactPhone" name="contactPhone" type="text" placeholder="Indicate a telephone number" th:field="*{contactPhone}"/> 
   				<ul>
					<li th:each="err : ${#fields.errors('contactPhone')}" th:text="${err}" />
				</ul>
   		
   		
   		<br>
   		<br>
   		
   		<label for="notes">Notes</label>
   		
   		<input id= "notes" name="notes" type="text" placeholder="Optional notes" th:field="*{notes}"/> 
   				<ul>
					<li th:each="err : ${#fields.errors('notes')}" th:text="${err}" />
				</ul>
   		
   		<br>
  		 <br>
  		 
  		 <label for="location">Establishment</label>
   		
   		<select form="form" id="location" name="location" type="text"  th:field="*{location}"/>
   		<option value="Arenal"> Arenal </option> 
   		<option value="Arenal"> Otro </option> 
   		</select>
   				<ul>
					<li th:each="err : ${#fields.errors('location')}" th:text="${err}" />
				</ul>
  		 
  		 
  		 <br>
  		 <br>
  		 <input type="submit" name="save" value="Upload" /> <br>
		  </form>
		 
	 	</div>
	 	
	 	<div>
		<p th:text="${message}"></p>
	</div>
		
	</div>
	
</body>
</html>